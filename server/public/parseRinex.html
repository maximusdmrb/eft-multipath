<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <!-- <button onclick="ddos">Оуч :)</button> -->
    <script>
      const params = {
        bs: "636",
        email: "",
        year: 2021,
        month: "08",
        date: 14,
        type: "1",
      };

      const typeRinex = {
        type1: [
          "00:30",
          "01:30",
          "02:30",
          "03:30",
          "04:30",
          "05:30",
          "06:30",
          "07:30",
          "08:30",
          "09:30",
          "10:30",
          "11:30",
          "12:30",
          "13:30",
          "14:30",
          "15:30",
          "16:30",
          "17:30",
          "18:30",
          "19:30",
          "20:30",
          "21:30",
          "22:30",
          "23:30",
        ],
        type12: ["00:30", "12:30"],
      };
      let formMax = new FormData();
      function ddos({ bs, email, date, month, year, type }) {
        formMax.set("_token", "fF4oJ0oTZuerdWn2fV7MRLGCRH0fDTC07Mm7UhY8");
        formMax.set("email", "");
        formMax.set("rinex[bs]", "636");
        formMax.set("send_to_email", false);
        formMax.set("rinex[timezone]", "0");
        formMax.set("rinex[version]", "2.11");
        formMax.set("rinex[frequency]", "10");

        let index = 0;
        query();
        const timer = setInterval(query, 5000);
        async function query() {
          if (index == typeRinex[`type${type}`].length - 1) {
            clearInterval(timer);
            formMax.set(
              "rinex[measure_start]",
              `${date}/${month}/${year} ${typeRinex[`type${type}`][index]}`
            );
            formMax.set(
              "rinex[measure_end]",
              `${date + 1}/${month}/${year} ${typeRinex[`type${type}`][0]}`
            );
            await fetch("https://bp.eft-cors.ru/json/get-rinex", {
              method: "post",
              body: formMax,
            });
            index++;
            console.log(formMax.get("rinex[measure_start]"));
            console.log(formMax.get("rinex[measure_end]"));
          } else {
            formMax.set(
              "rinex[measure_start]",
              `${date}/${month}/${year} ${typeRinex[`type${type}`][index]}`
            );
            formMax.set(
              "rinex[measure_end]",
              `${date}/${month}/${year} ${typeRinex[`type${type}`][index + 1]}`
            );
            await fetch("https://bp.eft-cors.ru/json/get-rinex", {
              method: "post",
              body: formMax,
            });
            index++;
            console.log(formMax.get("rinex[measure_start]"));
            console.log(formMax.get("rinex[measure_end]"));
          }
        }
      }
    </script>
  </body>
</html>
